<?php
require('io');
/**
 * Core Class for universal and app basic functions
 */
class Core extends IO
{
	/**
	 * Configuration settings credentials file
	 * @var string
	 */
	protected $env_file = '.env';

	/**
	 * [readFileToArr description]
	 * @return [type]       [description]
	 */
	protected function readFileToArr()
	{
		return file($this->env_file, FILE_IGNORE_NEW_LINES | FILE_SKIP_EMPTY_LINES);
	}

	protected static function validateParam(array $validated, array $rules)
	{
		return array_intersect($validated, $rules);
	}

	/**
	 * Delete null, "" and false from array.
	 * @param  array  $data [description]
	 * @return [type]       [description]
	 */
	public function prepToValidate(array $data)
	{
		return array_filter($data, 'strlen');
	}

	/**
	 * Process execution in background via CLI
	 * @param  string $cmd command to execute
	 * @return nothing
	 */
	protected static function execInBackground(string $cmd)
	{
		if (substr(php_uname(), 0, 7) == "Windows"){
		  pclose(popen("start /B ". $cmd, "r"));
		}
		else {
		  exec($cmd . " > /dev/null &");
		}
	}
}